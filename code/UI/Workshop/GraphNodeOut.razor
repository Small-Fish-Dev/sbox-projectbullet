@using Sandbox.UI;
@inherits Sandbox.UI.Panel
@namespace ProjectBullet.UI.Workshop

<style>
    GraphNodeOut {
        aspect-ratio: 1;
        width: 100%;
        border-radius: 50%;
        border: #ececec 3px solid;
        background-color: #3C6CB4;
    
        &:hover {
            background-color: #000000;
        }
    
        &.connected {
            background-color: #ffffff;
        }
    
        &.linking {
            background-color: #ffffff;
        }
        
        /* box-shadow: 10px 10px 0px 1px rgba(0,0,0,1); */
    }
</style>

<root></root>

@code {

    public GraphController.Connector Connector { get; set; }
    
    public bool IsConnected => Connector.IsConnected;
    public bool IsLinking;
    
    protected override void OnAfterTreeRender(bool firstTime)
    {
        base.OnAfterTreeRender(firstTime);

        if (firstTime)
        {
            Connector.Element = this;
        }
    }

    public override void Delete(bool immediate = false)
    {
        Connector.Element = null;

        base.Delete(immediate);
    }

    protected override void OnRightClick(MousePanelEvent e)
    {
        base.OnRightClick(e);

        if (Connector.IsConnected)
        {
            Connector.Disconnect();
        }

        e.StopPropagation();
    }

}